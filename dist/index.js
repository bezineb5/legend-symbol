var t=require("@mapbox/mapbox-gl-style-spec");function e(t){var e=t.expr,r=t.layer,i=Math.min(e(r,"paint","circle-radius"),8),n=Math.min(e(r,"paint","circle-stroke-width"),4),a=e(r,"paint","circle-color"),l=e(r,"paint","circle-opacity"),o=e(r,"paint","circle-stroke-color"),c=e(r,"paint","circle-stroke-opacity"),s=i-n/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:"blur("+e(r,"paint","circle-blur")*s+"px)"}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:a,opacity:l,r:s}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:c,r:i,"stroke-width":n,stroke:o}}]}}function r(t){var e=t.expr,r=t.layer;return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:"url("+(0,t.image)(e(r,"paint","fill-pattern"))+")",backgroundColor:e(r,"paint","fill-color"),opacity:e(r,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function i(t){var e=t.layer,r=t.expr,i=(0,t.image)(r(e,"paint","line-pattern")),n={stroke:i?"url(#img1)":r(e,"paint","line-color"),strokeWidth:Math.max(2,Math.min(r(e,"paint","line-width"),8)),strokeOpacity:r(e,"paint","line-opacity")},a=n.strokeWidth;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:n.strokeWidth,height:n.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:"translate("+-a/2+" "+-a/2+") rotate(45)"},children:[{element:"image",attributes:{key:"img",xlinkHref:i,x:0,y:0,width:n.strokeWidth,height:n.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:n,stroke:n.stroke,d:"M0 20 L 20 0"}}]}}function n(t){return function(t){var e=t.image,r=(0,t.expr)(t.layer,"layout","icon-image");if(!r)return null;var i=e(r);return i?{element:"div",attributes:{style:{backgroundImage:"url("+i+")",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}(t)||(n=(r=(e=t).expr)(i=e.layer,"paint","text-color"),a=r(i,"paint","text-opacity"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:l="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z",stroke:r(i,"paint","text-halo-color"),"stroke-width":2*r(i,"paint","text-halo-width"),fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:l,fill:"white"}},{element:"path",attributes:{key:"l3",d:l,fill:n,opacity:a}}]});var e,r,i,n,a,l}var a=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];module.exports=function(l){var o,c=l.sprite,s=l.layer,u={circle:e,symbol:n,line:i,fill:r}[s.type],p=(o=l.zoom,function(e,r,i){var n=function(t){var e=a.find(function(e){return t.startsWith(e[0])});return e?e[1]||e[0]:null}(i),l=t.latest[r+"_"+n][i];if(!e[r])return l.default;var c=e[r][i];if(void 0===c)return l.default;if("object"==typeof c){var s;if(!(s=Array.isArray(c)?t.expression.createExpression(c).value:t.function.createFunction(c,l)).evaluate)return null;var u=s.evaluate({zoom:o},{});return u?u.name||u:null}return c});return u?u({layer:s,expr:p,image:function(t){if(c&&c.json){var e=c.json[t];if(e)return r=c.image,n=(i=e).x,a=i.y,l=i.width,o=i.height,(s=document.createElement("canvas")).width=2*l,s.height=2*o,s.getContext("2d").drawImage(r,2*n,2*a,2*l,2*o,0,0,2*l,2*o),s.toDataURL()}var r,i,n,a,l,o,s;return null}}):null};
//# sourceMappingURL=index.js.map
